{namespace neos=TYPO3\Neos\ViewHelpers}
<div>
    <f:if condition="{products}">
        <f:then>
            <ul>
            <f:for each="{products}" as="product">
                <li><f:render section="productItem" arguments="{product: product, productDetailsNode: productDetailsNode}" /></li>
            </f:for>
            </ul>
        </f:then>
        <f:else>
            No products found
        </f:else>
    </f:if>
</div>

<f:section name="productItem">
    <div>
        <f:if condition="{product}">
            <f:then>
                <f:link.action package="TYPO3.Neos" controller="Frontend\Node" action="show" format="html" arguments="{node: productDetailsNode.contextPath, productSlug: product.slug.localized}">
                    <table>
                        <tbody>
                        <tr>
                            <th>Name</th><td>{product.name}</td>
                            <th>Image</th><td><img src="{product.masterVariant.images.0.small}"></td>
                        </tr>
                        </tbody>
                    </table>
                </f:link.action>
            </f:then>
            <f:else>
                Please provide an SKU for this product teaser.
            </f:else>
        </f:if>
    </div>
</f:section>
